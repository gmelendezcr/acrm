{% set tipoValido = true %}
{% set id = pregunta.idTipoPregunta.codTipoPregunta ~ "_" ~ pregunta.idPregunta %}



{% if pregunta.textoLongitudMaxima %}
    {% set maxLength = "maxlength=" ~ pregunta.textoLongitudMaxima %}
{% endif %}



{% if pregunta.idTipoPregunta.codTipoPregunta == 'TA' %}

{% elseif pregunta.idTipoPregunta.codTipoPregunta == 'SN' %}

    {% set opciones = [{'codigo': 'S', 'texto': 'SÃ­'}, {'codigo': 'N', 'texto': 'No'}, {'codigo': 'O', 'texto': pregunta.opcionOtroTexto}] %}

{% elseif pregunta.idTipoPregunta.codTipoPregunta == 'CA' %}

    {% set opciones = pregunta.idCatalogo.detallesCatalogo|merge(pregunta.opcionOtro ?
        [{'codDetalleCatalogo': pregunta.opcionOtroTexto, 'nbrDetalleCatalogo': pregunta.opcionOtroTexto}] : []) %}

{% elseif pregunta.idTipoPregunta.codTipoPregunta == 'FE' %}

    {% set maxLength = "maxlength=10" %}
    {% set datePicker = "[datePicker]" %}

{% elseif pregunta.idTipoPregunta.codTipoPregunta == 'FH' %}

    {% set maxLength = "maxlength=16" %}
    {% set datePicker = "[datePicker]" %}
    {% set tipoPreguntaTwig = 'FE' %}

{% elseif pregunta.idTipoPregunta.codTipoPregunta == 'OC'
    or pregunta.idTipoPregunta.codTipoPregunta == 'OR' %}

    {% set opciones = pregunta.opcionesRespuesta|merge(pregunta.opcionOtro ?
        [{'codOpcionRespuesta': pregunta.opcionOtroTexto, 'descripcionOpcionRespuesta': pregunta.opcionOtroTexto}] : []) %}

{% elseif pregunta.idTipoPregunta.codTipoPregunta == 'MA' %}

{% else %}

    Tipo de pregunta {{ pregunta.idTipoPregunta.codTipoPregunta }} no definido.
    {% set tipoValido = false %}

{% endif %}



{% if tipoValido %}

    {% set vars = {
        'pregunta': pregunta, 'id': id,
        'opciones': opciones ?? null, 'controlOpcionNoAplica': controlOpcionNoAplica ?? null,
        'colspanDescripcion': colspanDescripcion ?? 1, 'maxLength': maxLength ?? 1, 'datePicker': datePicker ?? '',
        '': idFila ?? null
    } %}

    {% include 'pregunta/' ~ (pregunta.idPreguntaPadre ? 'sub' : 'tipo') ~ 'Pregunta' ~ 
        tipoPreguntaTwig ?? pregunta.idTipoPregunta.codTipoPregunta ~ '.html.twig' with vars %}

{% endif %}
